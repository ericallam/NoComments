jQuery.fn.iCheckbox=function(start_state,options){if(jQuery(this).attr('type')=='checkbox'){var settings=jQuery.extend({switch_container_src:'images/iphone_switch_container.gif',switch_height:27,switch_width:94,switch_speed:150,switch_swing:-53,class_container:'iCheckbox_container',class_switch:'iCheckbox_switch',class_checkbox:'iCheckbox_checkbox',checkbox_hide:true,iCheckOff:function(elem,atime,animOnly){atime=typeof(atime)=='number'?atime:settings.switch_speed;animOnly=animOnly==true?true:false;atime=parseInt(atime)>0?atime:1;if(animOnly==true){jQuery(elem).animate({backgroundPosition:settings.switch_swing+'px 0px'},atime,'linear');}else{jQuery(elem).animate({backgroundPosition:settings.switch_swing+'px 0px'},atime,'linear',function(){var cB=jQuery(jQuery(this).parent()).find('input');jQuery(cB).removeAttr('checked');jQuery(cB).change();});}},iCheckOn:function(elem,atime,animOnly){atime=typeof(atime)=='number'?atime:settings.switch_speed;atime=parseInt(atime)>0?atime:1;if(animOnly==true){jQuery(elem).animate({backgroundPosition:'0px 0px'},atime,'linear');}else{jQuery(elem).animate({backgroundPosition:'0px 0px'},atime,'linear',function(){var cB=jQuery(jQuery(this).parent()).find('input');jQuery(cB).attr('checked','checked');jQuery(cB).change();});}}},options);var state=start_state=='on'?start_state:'off';return this.each(function(){var container;var image;container='<span class="'+settings.class_container+'"></span>';jQuery(this).wrap(container);image=jQuery('<img class="'+settings.class_switch+'" src="'+settings.switch_container_src+'" />');jQuery(this).parent().append(image);if(state=='on'){jQuery(this).attr('checked','checked');settings.iCheckOn(jQuery(this).parent().find('img'),1);}else{jQuery(this).removeAttr('checked');settings.iCheckOff(jQuery(this).parent().find('img'),1);}
jQuery(this).parent().find('.'+settings.class_switch).click(function(e){var cBox=jQuery(jQuery(e.target).parent()).find('input');var state=cBox.attr('checked')===true?'on':'off';if(state=='on'){state='off';settings.iCheckOff(jQuery(this),settings.switch_speed);}else{state='on';settings.iCheckOn(jQuery(this),settings.switch_speed);}
return e;});if(jQuery(this).hasClass(settings.class_checkbox)==false){jQuery(this).addClass(settings.class_checkbox);}
if(settings.checkbox_hide==true){jQuery(this).hide(0);}
jQuery(this).change(function(e){var cBox=jQuery(jQuery(e.target).parent()).find('input');var img=jQuery(jQuery(e.target).parent()).find('img');var state=cBox.attr('checked')===true?'on':'off';if(state=='on'){settings.iCheckOn(jQuery(img),settings.switch_speed,true);}else{settings.iCheckOff(jQuery(img),settings.switch_speed,true);}
return e;});return this;});return this;}else{return false;};};